import{j as e}from"./jsx-runtime.rd1UdKLT.js";import{L as j,a as b}from"./loader.BaX-dSmh.js";import{r as i}from"./index.CYTk6vBG.js";import{H as N}from"./header.DThMhDdz.js";import"./store.Bn0h-d5G.js";const S=c=>{const[f,u]=i.useState(!0),[o,d]=i.useState(!1),[s,a]=i.useState({enabled:!1,events:{agent_connect:!1,agent_disconnect:!1,process_start:!1,process_stop:!1,process_crash:!1,process_restart:!1},channels:[]}),[r,x]=i.useState("");async function m(){try{const n=await b.get(`${c.base}/daemon/config/notifications`).json();a(n||s)}catch(n){console.error("Failed to fetch notification settings:",n)}finally{u(!1)}}async function g(){d(!0);try{await b.post(`${c.base}/daemon/config/notifications`,{json:s}),alert("Notification settings saved successfully")}catch(n){alert("Failed to save settings: "+n.message)}finally{d(!1)}}const h=()=>{r.trim()&&(a({...s,channels:[...s.channels,r.trim()]}),x(""))},p=n=>{a({...s,channels:s.channels.filter((t,l)=>l!==n)})};return i.useEffect(()=>{m()},[]),f?e.jsx(j,{}):e.jsxs(i.Fragment,{children:[e.jsx(N,{name:"Notification Settings",description:"Configure desktop notifications and external notification channels.",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:g,disabled:o,className:"transition inline-flex items-center justify-center space-x-1.5 border focus:outline-none focus:ring-0 focus:ring-offset-0 focus:z-10 shrink-0 border-blue-700 hover:border-blue-600 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-zinc-700 disabled:border-zinc-700 disabled:cursor-not-allowed px-4 py-2 text-sm font-semibold rounded-lg",children:o?"Saving...":"Save Settings"}),e.jsx("button",{type:"button",onClick:m,className:"transition inline-flex items-center justify-center space-x-1.5 border focus:outline-none focus:ring-0 focus:ring-offset-0 focus:z-10 shrink-0 border-zinc-900 hover:border-zinc-800 bg-zinc-950 text-zinc-50 hover:bg-zinc-900 px-4 py-2 text-sm font-semibold rounded-lg",children:"Refresh"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-zinc-200",children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Master switch for all notifications"})]}),e.jsx("button",{onClick:()=>a({...s,enabled:!s.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${s.enabled?"bg-blue-600":"bg-zinc-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${s.enabled?"translate-x-6":"translate-x-1"}`})})]})}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-zinc-200 mb-4",children:"Event Types"}),e.jsx("div",{className:"space-y-4",children:Object.entries(s.events).map(([n,t])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-zinc-200",children:n.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")}),e.jsxs("div",{className:"text-xs text-zinc-400",children:["Notify when ",n.replace("_"," ")," occurs"]})]}),e.jsx("button",{onClick:()=>a({...s,events:{...s.events,[n]:!t}}),disabled:!s.enabled,className:`relative inline-flex h-6 w-11 items-center rounded-full transition ${t&&s.enabled?"bg-blue-600":"bg-zinc-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${t?"translate-x-6":"translate-x-1"}`})})]},n))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-zinc-200 mb-2",children:"Notification Channels"}),e.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:"Add external notification channels using Shoutrrr URLs (e.g., Discord, Slack, Telegram)"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:r,onChange:n=>x(n.target.value),onKeyPress:n=>n.key==="Enter"&&h(),placeholder:"discord://token@id or slack://token:token@channel",className:"flex-1 px-3 py-1.5 text-sm bg-zinc-800 border border-zinc-700 rounded-lg text-zinc-200 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:h,disabled:!r.trim()||!s.enabled,className:"px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-700 disabled:cursor-not-allowed text-white rounded-lg font-medium transition",children:"Add"})]}),s.channels.length===0?e.jsx("div",{className:"text-center py-4 text-zinc-400 text-sm",children:"No channels configured"}):e.jsx("div",{className:"space-y-2",children:s.channels.map((n,t)=>e.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 border border-zinc-700 rounded-lg p-3",children:[e.jsx("div",{className:"flex-1 font-mono text-sm text-zinc-300 truncate mr-4",children:n}),e.jsx("button",{onClick:()=>p(t),className:"text-red-400 hover:text-red-300 text-sm font-medium transition",children:"Remove"})]},t))}),e.jsx("div",{className:"mt-4 p-3 bg-zinc-800 border border-zinc-700 rounded-lg",children:e.jsxs("div",{className:"text-xs text-zinc-400",children:[e.jsx("strong",{className:"text-zinc-300",children:"Examples:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsxs("li",{children:[e.jsx("code",{className:"text-zinc-300",children:"discord://token@id"})," - Discord webhook"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-zinc-300",children:"slack://token:token@channel"})," - Slack webhook"]}),e.jsxs("li",{children:[e.jsx("code",{className:"text-zinc-300",children:"telegram://token@telegram?chats=@chat"})," - Telegram"]})]}),e.jsxs("p",{className:"mt-2",children:["See ",e.jsx("a",{href:"https://containrrr.dev/shoutrrr/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"Shoutrrr documentation"})," for more formats."]})]})})]})]})]})};export{S as default};
