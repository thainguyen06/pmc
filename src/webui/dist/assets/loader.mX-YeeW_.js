import{$ as j}from"./store.Bn0h-d5G.js";import{j as l}from"./jsx-runtime.CA8WIsp6.js";class w extends Error{response;request;options;constructor(e,t,s){const n=e.status||e.status===0?e.status:"",o=e.statusText??"",i=`${n} ${o}`.trim(),h=i?`status code ${i}`:"an unknown error";super(`Request failed with ${h}: ${t.method} ${t.url}`),this.name="HTTPError",this.response=e,this.request=t,this.options=s}}class v extends Error{name="NonError";value;constructor(e){let t="Non-error value was thrown";try{typeof e=="string"?t=e:e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"&&(t=e.message)}catch{}super(t),this.value=e}}class g extends Error{name="ForceRetryError";customDelay;code;customRequest;constructor(e){const t=e?.cause?e.cause instanceof Error?e.cause:new v(e.cause):void 0;super(e?.code?`Forced retry: ${e.code}`:"Forced retry",t?{cause:t}:void 0),this.customDelay=e?.delay,this.code=e?.code,this.customRequest=e?.request}}const T=(()=>{let r=!1,e=!1;const t=typeof globalThis.ReadableStream=="function",s=typeof globalThis.Request=="function";if(t&&s)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type")}catch(n){if(n instanceof Error&&n.message==="unsupported BodyInit type")return!1;throw n}return r&&!e})(),N=typeof globalThis.AbortController=="function",C=typeof globalThis.AbortSignal=="function"&&typeof globalThis.AbortSignal.any=="function",D=typeof globalThis.ReadableStream=="function",_=typeof globalThis.FormData=="function",P=["get","post","put","patch","head","delete"],U={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*",bytes:"*/*"},b=2147483647,H=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,k=Symbol("stop");class q{options;constructor(e){this.options=e}}const F=r=>new q(r),$={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0,context:!0},z={next:!0},M={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,duplex:!0},B=r=>{if(!r)return 0;if(r instanceof FormData){let e=0;for(const[t,s]of r)e+=H,e+=new TextEncoder().encode(`Content-Disposition: form-data; name="${t}"`).length,e+=typeof s=="string"?new TextEncoder().encode(s).length:s.size;return e}if(r instanceof Blob)return r.size;if(r instanceof ArrayBuffer)return r.byteLength;if(typeof r=="string")return new TextEncoder().encode(r).length;if(r instanceof URLSearchParams)return new TextEncoder().encode(r.toString()).length;if("byteLength"in r)return r.byteLength;if(typeof r=="object"&&r!==null)try{const e=JSON.stringify(r);return new TextEncoder().encode(e).length}catch{return 0}return 0},L=(r,e,t)=>{let s,n=0;return r.pipeThrough(new TransformStream({transform(o,i){if(i.enqueue(o),s){n+=s.byteLength;let h=e===0?0:n/e;h>=1&&(h=1-Number.EPSILON),t?.({percent:h,totalBytes:Math.max(e,n),transferredBytes:n},s)}s=o},flush(){s&&(n+=s.byteLength,t?.({percent:1,totalBytes:Math.max(e,n),transferredBytes:n},s))}}))},J=(r,e)=>{if(!r.body)return r;if(r.status===204)return new Response(null,{status:r.status,statusText:r.statusText,headers:r.headers});const t=Math.max(0,Number(r.headers.get("content-length"))||0);return new Response(L(r.body,t,e),{status:r.status,statusText:r.statusText,headers:r.headers})},G=(r,e,t)=>{if(!r.body)return r;const s=B(t??r.body);return new Request(r,{duplex:"half",body:L(r.body,s,e)})},f=r=>r!==null&&typeof r=="object",m=(...r)=>{for(const e of r)if((!f(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return x({},...r)},A=(r={},e={})=>{const t=new globalThis.Headers(r),s=e instanceof globalThis.Headers,n=new globalThis.Headers(e);for(const[o,i]of n.entries())s&&i==="undefined"||i===void 0?t.delete(o):t.set(o,i);return t};function y(r,e,t){return Object.hasOwn(e,t)&&e[t]===void 0?[]:x(r[t]??[],e[t]??[])}const I=(r={},e={})=>({beforeRequest:y(r,e,"beforeRequest"),beforeRetry:y(r,e,"beforeRetry"),afterResponse:y(r,e,"afterResponse"),beforeError:y(r,e,"beforeError")}),V=(r,e)=>{const t=new URLSearchParams;for(const s of[r,e])if(s!==void 0)if(s instanceof URLSearchParams)for(const[n,o]of s.entries())t.append(n,o);else if(Array.isArray(s))for(const n of s){if(!Array.isArray(n)||n.length!==2)throw new TypeError("Array search parameters must be provided in [[key, value], ...] format");t.append(String(n[0]),String(n[1]))}else if(f(s))for(const[n,o]of Object.entries(s))o!==void 0&&t.append(n,String(o));else{const n=new URLSearchParams(s);for(const[o,i]of n.entries())t.append(o,i)}return t},x=(...r)=>{let e={},t={},s={},n;const o=[];for(const i of r)if(Array.isArray(i))Array.isArray(e)||(e=[]),e=[...e,...i];else if(f(i)){for(let[h,a]of Object.entries(i)){if(h==="signal"&&a instanceof globalThis.AbortSignal){o.push(a);continue}if(h==="context"){if(a!=null&&(!f(a)||Array.isArray(a)))throw new TypeError("The `context` option must be an object");e={...e,context:a==null?{}:{...e.context,...a}};continue}if(h==="searchParams"){a==null?n=void 0:n=n===void 0?a:V(n,a);continue}f(a)&&h in e&&(a=x(e[h],a)),e={...e,[h]:a}}f(i.hooks)&&(s=I(s,i.hooks),e.hooks=s),f(i.headers)&&(t=A(t,i.headers),e.headers=t)}return n!==void 0&&(e.searchParams=n),o.length>0&&(o.length===1?e.signal=o[0]:C?e.signal=AbortSignal.any(o):e.signal=o.at(-1)),e.context===void 0&&(e.context={}),e},X=r=>P.includes(r)?r.toUpperCase():r,W=["get","put","head","delete","options","trace"],Y=[408,413,429,500,502,503,504],Z=[413,429,503],S={limit:2,methods:W,statusCodes:Y,afterStatusCodes:Z,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:r=>.3*2**(r-1)*1e3,jitter:void 0,retryOnTimeout:!1},K=(r={})=>{if(typeof r=="number")return{...S,limit:r};if(r.methods&&!Array.isArray(r.methods))throw new Error("retry.methods must be an array");if(r.methods&&=r.methods.map(t=>t.toLowerCase()),r.statusCodes&&!Array.isArray(r.statusCodes))throw new Error("retry.statusCodes must be an array");const e=Object.fromEntries(Object.entries(r).filter(([,t])=>t!==void 0));return{...S,...e}};class R extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}async function Q(r,e,t,s){return new Promise((n,o)=>{const i=setTimeout(()=>{t&&t.abort(),o(new R(r))},s.timeout);s.fetch(r,e).then(n).catch(o).then(()=>{clearTimeout(i)})})}async function ee(r,{signal:e}){return new Promise((t,s)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",n,{once:!0}));function n(){clearTimeout(o),s(e.reason)}const o=setTimeout(()=>{e?.removeEventListener("abort",n),t()},r)})}const te=(r,e)=>{const t={};for(const s in e)Object.hasOwn(e,s)&&!(s in M)&&!(s in $)&&(!(s in r)||s in z)&&(t[s]=e[s]);return t},se=r=>r===void 0?!1:Array.isArray(r)?r.length>0:r instanceof URLSearchParams?r.size>0:typeof r=="object"?Object.keys(r).length>0:typeof r=="string"?r.trim().length>0:!!r;function re(r){return r instanceof w||r?.name===w.name}function ne(r){return r instanceof R||r?.name===R.name}class d{static create(e,t){const s=new d(e,t),n=async()=>{if(typeof s.#e.timeout=="number"&&s.#e.timeout>b)throw new RangeError(`The \`timeout\` option cannot be greater than ${b}`);await Promise.resolve();let i=await s.#g();for(const h of s.#e.hooks.afterResponse){const a=s.#l(i.clone());let c;try{c=await h(s.request,s.#h(),a,{retryCount:s.#s})}catch(O){throw s.#i(a),s.#i(i),O}if(c instanceof q)throw s.#i(a),s.#i(i),new g(c.options);const p=c instanceof globalThis.Response?c:i;a!==p&&s.#i(a),i!==p&&s.#i(i),i=p}if(s.#l(i),!i.ok&&(typeof s.#e.throwHttpErrors=="function"?s.#e.throwHttpErrors(i.status):s.#e.throwHttpErrors)){let h=new w(i,s.request,s.#h());for(const a of s.#e.hooks.beforeError)h=await a(h,{retryCount:s.#s});throw h}if(s.#e.onDownloadProgress){if(typeof s.#e.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!D)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");const h=i.clone();return s.#i(i),J(h,s.#e.onDownloadProgress)}return i},o=s.#d(n).finally(()=>{const i=s.#o;s.#c(i?.body??void 0),s.#c(s.request.body??void 0)});for(const[i,h]of Object.entries(U))i==="bytes"&&typeof globalThis.Response?.prototype?.bytes!="function"||(o[i]=async()=>{s.request.headers.set("accept",s.request.headers.get("accept")||h);const a=await o;if(i==="json"){if(a.status===204)return"";const c=await a.text();return c===""?"":t.parseJson?t.parseJson(c):JSON.parse(c)}return a[i]()});return o}static#y(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof URLSearchParams)?Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)):e}request;#r;#s=0;#t;#e;#o;#n;#a;constructor(e,t={}){if(this.#t=e,this.#e={...t,headers:A(this.#t.headers,t.headers),hooks:I({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},t.hooks),method:X(t.method??this.#t.method??"GET"),prefixUrl:String(t.prefixUrl||""),retry:K(t.retry),throwHttpErrors:t.throwHttpErrors??!0,timeout:t.timeout??1e4,fetch:t.fetch??globalThis.fetch.bind(globalThis),context:t.context??{}},typeof this.#t!="string"&&!(this.#t instanceof URL||this.#t instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this.#e.prefixUrl&&typeof this.#t=="string"){if(this.#t.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this.#e.prefixUrl.endsWith("/")||(this.#e.prefixUrl+="/"),this.#t=this.#e.prefixUrl+this.#t}N&&C&&(this.#n=this.#e.signal??this.#t.signal,this.#r=new globalThis.AbortController,this.#e.signal=this.#n?AbortSignal.any([this.#n,this.#r.signal]):this.#r.signal),T&&(this.#e.duplex="half"),this.#e.json!==void 0&&(this.#e.body=this.#e.stringifyJson?.(this.#e.json)??JSON.stringify(this.#e.json),this.#e.headers.set("content-type",this.#e.headers.get("content-type")??"application/json"));const s=t.headers&&new globalThis.Headers(t.headers).has("content-type");if(this.#t instanceof globalThis.Request&&(_&&this.#e.body instanceof globalThis.FormData||this.#e.body instanceof URLSearchParams)&&!s&&this.#e.headers.delete("content-type"),this.request=new globalThis.Request(this.#t,this.#e),se(this.#e.searchParams)){const o="?"+(typeof this.#e.searchParams=="string"?this.#e.searchParams.replace(/^\?/,""):new URLSearchParams(d.#y(this.#e.searchParams)).toString()),i=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,o);this.request=new globalThis.Request(i,this.#e)}if(this.#e.onUploadProgress){if(typeof this.#e.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!T)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request=this.#m(this.request,this.#e.body??void 0)}}#u(){const e=this.#e.retry.delay(this.#s);let t=e;this.#e.retry.jitter===!0?t=Math.random()*e:typeof this.#e.retry.jitter=="function"&&(t=this.#e.retry.jitter(e),(!Number.isFinite(t)||t<0)&&(t=e));const s=this.#e.retry.backoffLimit??Number.POSITIVE_INFINITY;return Math.min(s,t)}async#p(e){if(this.#s++,this.#s>this.#e.retry.limit)throw e;const t=e instanceof Error?e:new v(e);if(t instanceof g)return t.customDelay??this.#u();if(!this.#e.retry.methods.includes(this.request.method.toLowerCase()))throw e;if(this.#e.retry.shouldRetry!==void 0){const s=await this.#e.retry.shouldRetry({error:t,retryCount:this.#s});if(s===!1)throw e;if(s===!0)return this.#u()}if(ne(e)&&!this.#e.retry.retryOnTimeout)throw e;if(re(e)){if(!this.#e.retry.statusCodes.includes(e.response.status))throw e;const s=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Retry-After")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(s&&this.#e.retry.afterStatusCodes.includes(e.response.status)){let n=Number(s)*1e3;Number.isNaN(n)?n=Date.parse(s)-Date.now():n>=Date.parse("2024-01-01")&&(n-=Date.now());const o=this.#e.retry.maxRetryAfter??n;return n<o?n:o}if(e.response.status===413)throw e}return this.#u()}#l(e){return this.#e.parseJson&&(e.json=async()=>this.#e.parseJson(await e.text())),e}#c(e){e&&e.cancel().catch(()=>{})}#i(e){this.#c(e.body??void 0)}async#d(e){try{return await e()}catch(t){const s=Math.min(await this.#p(t),b);if(this.#s<1)throw t;if(await ee(s,this.#n?{signal:this.#n}:{}),t instanceof g&&t.customRequest){const n=this.#e.signal?new globalThis.Request(t.customRequest,{signal:this.#e.signal}):new globalThis.Request(t.customRequest);this.#f(n)}for(const n of this.#e.hooks.beforeRetry){const o=await n({request:this.request,options:this.#h(),error:t,retryCount:this.#s});if(o instanceof globalThis.Request){this.#f(o);break}if(o instanceof globalThis.Response)return o;if(o===k)return}return this.#d(e)}}async#g(){this.#r?.signal.aborted&&(this.#r=new globalThis.AbortController,this.#e.signal=this.#n?AbortSignal.any([this.#n,this.#r.signal]):this.#r.signal,this.request=new globalThis.Request(this.request,{signal:this.#e.signal}));for(const t of this.#e.hooks.beforeRequest){const s=await t(this.request,this.#h(),{retryCount:this.#s});if(s instanceof Response)return s;if(s instanceof globalThis.Request){this.#f(s);break}}const e=te(this.request,this.#e);return this.#o=this.request,this.request=this.#o.clone(),this.#e.timeout===!1?this.#e.fetch(this.#o,e):Q(this.#o,e,this.#r,this.#e)}#h(){if(!this.#a){const{hooks:e,...t}=this.#e;this.#a=Object.freeze(t)}return this.#a}#f(e){this.#a=void 0,this.request=this.#m(e)}#m(e,t){return!this.#e.onUploadProgress||!e.body?e:G(e,this.#e.onUploadProgress,t??this.#e.body??void 0)}}/*! MIT License Â© Sindre Sorhus */const E=r=>{const e=(t,s)=>d.create(t,m(r,s));for(const t of P)e[t]=(s,n)=>d.create(s,m(r,n,{method:t}));return e.create=t=>E(m(t)),e.extend=t=>(typeof t=="function"&&(t=t(r??{})),E(m(r,t))),e.stop=k,e.retry=F,e},ie=E();var u=function(r,e){if(!(this instanceof u))return new u(r,e);this.url=r,e=e||{},this.headers=e.headers||{},this.payload=e.payload!==void 0?e.payload:"",this.method=e.method||this.payload&&"POST"||"GET",this.withCredentials=!!e.withCredentials,this.debug=!!e.debug,this.autoReconnect=e.autoReconnect!==void 0?e.autoReconnect:!1,this.reconnectDelay=e.reconnectDelay!==void 0?e.reconnectDelay:3e3,this.maxRetries=e.maxRetries!==void 0?e.maxRetries:null,this.retryCount=0,this.reconnectTimer=null,this.useLastEventId=e.useLastEventId!==void 0?e.useLastEventId:!0,this.FIELD_SEPARATOR=":",this.listeners={},this.xhr=null,this.readyState=u.INITIALIZING,this.progress=0,this.chunk="",this.lastEventId="",this.addEventListener=function(t,s){this.listeners[t]===void 0&&(this.listeners[t]=[]),this.listeners[t].indexOf(s)===-1&&this.listeners[t].push(s)},this.removeEventListener=function(t,s){if(this.listeners[t]===void 0)return;const n=[];this.listeners[t].forEach(function(o){o!==s&&n.push(o)}),n.length===0?delete this.listeners[t]:this.listeners[t]=n},this.dispatchEvent=function(t){if(!t)return!0;this.debug&&console.debug(t),t.source=this;const s="on"+t.type;return this.hasOwnProperty(s)&&(this[s].call(this,t),t.defaultPrevented)?!1:this.listeners[t.type]?this.listeners[t.type].every(function(n){return n(t),!t.defaultPrevented}):!0},this._markClosed=function(){if(this.xhr=null,this.progress=0,this.chunk="",this._setReadyState(u.CLOSED),this.autoReconnect){if(this.maxRetries!==null&&this.retryCount>=this.maxRetries){this.debug&&console.debug(`SSE max retries (${this.maxRetries}) reached, stopping reconnection attempts`),this.autoReconnect=!1,this.close();return}this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.debug&&console.debug(`SSE will attempt to reconnect in ${this.reconnectDelay}ms (attempt ${this.retryCount+1}${this.maxRetries?"/"+this.maxRetries:""})`),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.retryCount++,this.stream()},this.reconnectDelay)}},this._setReadyState=function(t){const s=new CustomEvent("readystatechange");s.readyState=t,this.readyState=t,this.dispatchEvent(s)},this._onStreamFailure=function(t){const s=new CustomEvent("error");s.responseCode=t.currentTarget.status,s.data=t.currentTarget.response,this.dispatchEvent(s),this._markClosed()},this._onStreamAbort=function(){this.dispatchEvent(new CustomEvent("abort")),this._markClosed()},this._onStreamProgress=function(t){if(!this.xhr)return;if(this.xhr.status<200||this.xhr.status>=300){this._onStreamFailure(t);return}this.retryCount=0;const s=this.xhr.responseText.substring(this.progress);this.progress+=s.length;const n=(this.chunk+s).split(/(\r\n\r\n|\r\r|\n\n)/g),o=n.pop();n.forEach(function(i){i.trim().length>0&&this.dispatchEvent(this._parseEventChunk(i))}.bind(this)),this.chunk=o},this._onStreamLoaded=function(t){this._onStreamProgress(t),this.dispatchEvent(this._parseEventChunk(this.chunk)),this.chunk="",this._markClosed()},this._parseEventChunk=function(t){if(!t||t.length===0)return null;this.debug&&console.debug(t);const s={id:null,retry:null,data:null,event:null};if(t.split(/\n|\r\n|\r/).forEach(function(o){const i=o.indexOf(this.FIELD_SEPARATOR);let h,a;if(i>0){const c=o[i+1]===" "?2:1;h=o.substring(0,i),a=o.substring(i+c)}else if(i<0)h=o,a="";else return;h in s&&(h==="data"&&s[h]!==null?s.data+=`
`+a:s[h]=a)}.bind(this)),s.data===null)return null;s.id!==null&&(this.lastEventId=s.id);const n=new CustomEvent(s.event||"message");return n.id=s.id,n.data=s.data||"",n.lastEventId=this.lastEventId,n},this._onReadyStateChange=function(){if(this.xhr&&this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED){const t={},s=this.xhr.getAllResponseHeaders().trim().split(`\r
`);for(const o of s){const[i,...h]=o.split(":"),a=h.join(":").trim();t[i.trim().toLowerCase()]=t[i.trim().toLowerCase()]||[],t[i.trim().toLowerCase()].push(a)}const n=new CustomEvent("open");n.responseCode=this.xhr.status,n.headers=t,this.dispatchEvent(n),this._setReadyState(u.OPEN)}},this.stream=function(){if(!this.xhr){this._setReadyState(u.CONNECTING),this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this._onStreamProgress.bind(this)),this.xhr.addEventListener("load",this._onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this._onReadyStateChange.bind(this)),this.xhr.addEventListener("error",this._onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this._onStreamAbort.bind(this)),this.xhr.open(this.method,this.url);for(let t in this.headers)this.xhr.setRequestHeader(t,this.headers[t]);this.useLastEventId&&this.lastEventId.length>0&&this.xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)}},this.close=function(){this.readyState!==u.CLOSED&&(this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.autoReconnect=!1,this.xhr.abort())},(e.start===void 0||e.start)&&this.stream()};u.INITIALIZING=-1;u.CONNECTING=0;u.OPEN=1;u.CLOSED=2;typeof exports<"u"&&(exports.SSE=u);const oe={token:j.get().token},ae={limit:2,methods:["get"],statusCodes:[408,413,429,500,502,503,504]},ce=ie.create({headers:oe,timeout:1e4,retry:ae}),fe=()=>l.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",zIndex:50},children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"h-1.5 w-80 sm:w-96 bg-zinc-800/50 overflow-hidden rounded-full backdrop-blur-sm shadow-lg",children:l.jsx("div",{className:"animate-progress w-full h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 origin-left-right shadow-glow"})}),l.jsx("div",{className:"text-center text-zinc-400 text-sm animate-pulse",children:"Loading..."})]})});export{fe as L,u as S,ce as a,oe as h};
